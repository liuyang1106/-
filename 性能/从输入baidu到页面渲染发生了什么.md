## 从输入 google.com 到页面渲染的这个过程发生了什么？

这里我从计算机网络相关回答这个问题

### OSI 网络七层协议体系结构

- 物理层
- 数据链路层
- 网络层
- 传输层
- 表示层
- 会话层
- 表示层

1. 物理层
   双绞线、光缆这种物理传输介质；带宽，越大越好，比如 100M 优于 50M；工作方式，单双工，全双工；路由器，交换机之类
2. 数据链路层
   主要负责点到点传输（PPP 协议），另外可以在此层做差错检测（冗余检测），检测丢帧与否。
3. 网络层
   熟悉的 IP 协议在这里工作；于 IP 协议一起使用的，ARP（地址解析协议，将 IP 地址解析位 MAC 地址）。IP 地址其实就是指明了一台主机；IP 分为 A，B，C 类网络，192.xxx 开头的典型的 C 类网络
4. 传输层
   - UDP 用户数据报协议
   - TCP 传输控制协议
     TCP 协议：1.面向连接的运输层协议，需要建立连接；2.可靠的，无差错，不重复；3.提供全双工；4.面向字节流；5.点对点（双端口）
   - TCP 如何连接？1.套接字（IP 地址：端口号），双端口；因此 TCP 连接=套接字 1+套接字 2 的连接；
   - TCP 如何实现可靠传输？
     - 停止等待协议；每发送完 1 个分组就停止发送，等待对方的确认（一个一个的传输，一个一个的确认，因此是可靠）
       - 无差错情况：
       - 出现差错情况：超时-超时重传
       - 确认丢失和确认迟到
       - 缺点是信道利用率太低
     - 连续 ARQ 协议
       - 计算机网络（ P201）有定义
       - 其实就是增加停止等待协议的传输数量，批量传输，批量确认（类似于流水线的停止等待协议）
     - TCP 报文段格式（P202）
       - 源端口目的端口；序号；确认号；数据偏移；保留；紧急 URG；确认 ACK；推送 PSH；复位 RST；同步 SYN；终止 FIN；窗口；检验和；紧急指针；选项
     - 三次握手
       - 1.客户端 SYN= 1，seq=x; （你好）2.服务器：SYN=1，ACK=1，seq=y,ack=x+1（你好，收到了）；3.ACK=1,seq=x+1,ack=y+1;（你好，我也收到了）
     - 四次握手
       - 1.客户端：FIN=1，seq=u；（你好，我要关闭了）2.服务端：ACK=1，seq=v,ack=u+1（正常回复上一次的数据）；3.服务器：FIN=1，ACK=1，seq=w,ack=+1（你好，你的关闭信号我收到了，我要关了哈）；4.客户端：ACK=1，seq=u+1,ack=w+1;（好的，你关吧，我也准备关了，服务器收到后就关闭）5.客户端等待 2 个 MSL 时间，关闭
